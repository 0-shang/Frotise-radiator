<!DOCTYPE html>
<html lang="en" translate="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="google" content="notranslate">
    
    <!-- PWA Settings -->
    <meta name="theme-color" content="#0056b3">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    
    <title>FROTISE SYSTEM</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <!-- Zoom Library -->
    <script src="https://unpkg.com/@panzoom/panzoom@4.5.1/dist/panzoom.min.js"></script>

    <style>
        /* --- DESIGN SYSTEM --- */
        :root {
            --brand-primary: #0056b3; 
            --brand-gradient: linear-gradient(135deg, #0056b3 0%, #002855 100%);
            --promo: #dc3545; 
            --text-dark: #1e293b;
            --bg-main: #f8fafc;
            --stock-high-bg: #dcfce7; --stock-high-text: #15803d;
            --stock-low-bg: #ffedd5; --stock-low-text: #c2410c;
            --stock-zero-bg: #fee2e2; --stock-zero-text: #b91c1c;
        }

        body { background-color: var(--bg-main); font-family: "Inter", -apple-system, sans-serif; padding-bottom: 100px; -webkit-font-smoothing: antialiased; }
        .fw-800 { font-weight: 800; }
        
        /* --- LOGIN --- */
        #loginSection { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #fff; z-index: 9999; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .login-logo-img { max-width: 240px; margin-bottom: 30px; }
        .form-control-minimal { border: none; border-bottom: 2px solid #e2e8f0; border-radius: 0; padding: 12px; text-align: center; background: transparent; font-weight: 600; margin-bottom: 20px; color: #334155; }
        .form-control-minimal:focus { box-shadow: none; border-color: var(--brand-primary); }
        .btn-login { background: var(--brand-primary); color: white; border: none; padding: 12px 0; width: 100%; border-radius: 8px; font-weight: 800; letter-spacing: 1px; }

        /* --- HEADER --- */
        .header-bg { background: var(--brand-gradient); color: white; padding: 0 0 50px 0; border-radius: 0 0 30px 30px; box-shadow: 0 10px 30px rgba(0,53,128,0.3); overflow: hidden; position: relative; }
        .header-top { display: flex; justify-content: space-between; align-items: center; padding: 15px 20px; }
        .header-brand { text-align: center; margin-top: 5px; }
        .brand-title { font-family: 'Inter', sans-serif; font-weight: 900; font-size: 2.8rem; letter-spacing: 2px; margin: 0; text-shadow: 0 4px 10px rgba(0,0,0,0.2); }
        .brand-sub { font-size: 0.7rem; opacity: 0.6; letter-spacing: 4px; text-transform: uppercase; }

        /* --- SEARCH & LIST --- */
        .search-card { margin: -35px 20px 20px; background: white; padding: 8px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.08); position: relative; z-index: 10; }
        .search-input { border: none; height: 50px; font-size: 1.1rem; font-weight: 500; text-align: center; }
        .search-input:focus { box-shadow: none; }

        .result-item { background: white; border-radius: 12px; margin-bottom: 10px; padding: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.03); cursor: pointer; transition: transform 0.1s; border: 1px solid transparent; }
        .result-item:active { transform: scale(0.98); border-color: var(--brand-primary); background: #f1f5f9; }
        
        .part-code { color: var(--brand-primary); font-weight: 800; font-size: 0.95rem; }
        .part-name { color: #64748b; font-size: 0.85rem; font-weight: 600; line-height: 1.3; margin-top: 4px; }
        .stock-tag { font-size: 0.6rem; padding: 2px 8px; border-radius: 4px; font-weight: 800; }
        
        /* --- CART FAB --- */
        .fab-cart { position: fixed; bottom: 30px; right: 30px; background: var(--brand-primary); color: white; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 8px 20px rgba(0,86,179,0.4); z-index: 5000; cursor: pointer; }
        .cart-badge { position: absolute; top: -2px; right: -2px; background: var(--promo); color: white; border: 2px solid white; border-radius: 50%; width: 24px; height: 24px; font-size: 0.75rem; font-weight: 800; display: flex; align-items: center; justify-content: center; }

        /* --- UTILS --- */
        .bg-stock-high { background: var(--stock-high-bg); color: var(--stock-high-text); }
        .bg-stock-low { background: var(--stock-low-bg); color: var(--stock-low-text); }
        .bg-stock-zero { background: var(--stock-zero-bg); color: var(--stock-zero-text); }
        
        /* --- MODAL --- */
        .modal-img-wrapper { background: #f8fafc; padding: 20px; border-radius: 15px; margin-bottom: 15px; display: flex; justify-content: center; }
        .modal-img { max-height: 200px; max-width: 100%; object-fit: contain; }
        #imageOverlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 10000; display: none; justify-content: center; align-items: center; }
        #fullImage { max-width: 100%; max-height: 90%; }
        
        /* --- PRICE --- */
        .p-orig { text-decoration: line-through; color: #94a3b8; font-size: 0.9rem; margin-right: 5px; }
        .p-promo { color: var(--promo); font-weight: 800; font-size: 1.2rem; }
        .p-norm { color: var(--text-dark); font-weight: 800; font-size: 1.2rem; }
    </style>
</head>
<body>

    <!-- FULL IMAGE OVERLAY -->
    <div id="imageOverlay" onclick="this.style.display='none'">
        <img id="fullImage" src="">
        <div style="position:absolute; bottom:40px; color:white; font-size:0.8rem; letter-spacing:2px;">TAP TO CLOSE</div>
    </div>

    <!-- LOGIN SCREEN -->
    <div id="loginSection">
        <img src="logo.png" alt="FROTISE" class="login-logo-img">
        <div style="width: 80%; max-width: 320px;">
            <input type="text" id="loginId" class="form-control form-control-minimal" placeholder="CLIENT CODE">
            <input type="password" id="loginPass" class="form-control form-control-minimal" placeholder="PASSWORD">
            <button onclick="app.login()" class="btn-login">ENTER SYSTEM</button>
            <div id="loginMsg" class="text-danger mt-3 small fw-bold text-center"></div>
        </div>
    </div>

    <!-- MAIN APP -->
    <div id="mainApp" style="display:none;">
        <div class="header-bg">
            <div class="header-top">
                <small style="opacity:0.8">Hi, <b id="uName">User</b></small>
                <i class="bi bi-box-arrow-right fs-4" onclick="location.reload()" style="cursor:pointer; opacity:0.8;"></i>
            </div>
            <div class="header-brand">
                <h1 class="brand-title">FROTISE</h1>
                <div class="brand-sub">PARTS SYSTEM</div>
            </div>
        </div>

        <div class="search-card">
            <input type="text" id="searchInput" class="form-control search-input" placeholder="Search Part Number..." onkeyup="app.search()">
        </div>

        <div class="container pb-5">
            <div id="loadingMsg" class="text-center text-muted py-5 small">Initializing Database...</div>
            <div id="resultsList"></div>
        </div>

        <div class="fab-cart" onclick="app.openCart()">
            <i class="bi bi-cart-fill fs-4"></i>
            <div id="cartBadge" class="cart-badge" style="display:none;">0</div>
        </div>
    </div>

    <!-- PRODUCT MODAL -->
    <div class="modal fade" id="pModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content border-0 shadow-lg" style="border-radius: 20px;">
                <div class="modal-header border-0"><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div>
                <div class="modal-body text-center pt-0">
                    <div class="modal-img-wrapper" onclick="app.viewImage(document.getElementById('mImg').src)">
                        <img id="mImg" class="modal-img" src="" onerror="this.style.display='none'">
                        <div class="position-absolute bottom-0 end-0 m-2 text-muted small"><i class="bi bi-zoom-in"></i></div>
                    </div>
                    <h3 id="mCode" class="fw-800 text-dark mb-1"></h3>
                    <p id="mName" class="text-muted fw-bold small text-uppercase mb-3"></p>
                    
                    <div class="d-flex justify-content-between align-items-center bg-light p-3 rounded-4 mb-3">
                        <div class="text-start">
                            <small class="d-block text-muted" style="font-size:0.65rem; font-weight:700;">PRICE</small>
                            <div id="mPriceBox"></div>
                        </div>
                        <div class="text-end">
                            <small class="d-block text-muted" style="font-size:0.65rem; font-weight:700;">STATUS</small>
                            <div id="mStockBox"></div>
                        </div>
                    </div>

                    <div id="mPromoMsg" class="alert alert-warning py-1 small fw-bold mb-3" style="display:none; color:#854d0e; background:#fef9c3;">
                        <i class="bi bi-tag-fill me-1"></i> Buy 5+ for Promo Price
                    </div>

                    <div id="mActionBox" class="d-flex gap-2">
                        <div class="d-flex align-items-center bg-light rounded-pill px-2">
                            <button class="btn btn-sm" onclick="app.adjQty(-1)"><i class="bi bi-dash fw-bold"></i></button>
                            <input type="number" id="mQty" class="form-control border-0 bg-transparent text-center fw-bold p-0" style="width:40px;" value="1" readonly>
                            <button class="btn btn-sm" onclick="app.adjQty(1)"><i class="bi bi-plus fw-bold"></i></button>
                        </div>
                        <button onclick="app.addToCart()" class="btn btn-primary flex-grow-1 rounded-pill fw-bold shadow-sm">ADD TO CART</button>
                    </div>
                    <div id="mOutStock" class="alert alert-danger mb-0 fw-bold small" style="display:none;">OUT OF STOCK</div>
                </div>
            </div>
        </div>
    </div>

    <!-- CART MODAL -->
    <div class="modal fade" id="cModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-scrollable">
            <div class="modal-content border-0 shadow-lg" style="border-radius: 20px;">
                <div class="modal-header border-0 bg-light">
                    <h5 class="fw-800 m-0 text-primary ps-2">Your Order</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body bg-white p-3" id="cBody"></div>
                <div class="modal-footer d-block border-0 pt-0 pb-4">
                    <div class="d-flex justify-content-between mb-3 align-items-end">
                        <span class="text-muted small fw-bold">TOTAL</span>
                        <span id="cTotal" class="fs-2 fw-800 text-dark">0</span>
                    </div>
                    <div id="limitAlert" class="alert alert-danger py-1 small text-center fw-bold mb-2" style="display:none;">Max Order Limit: 100,000</div>
                    <button onclick="app.sendOrder()" class="btn btn-success w-100 rounded-pill fw-bold py-3 shadow-sm">
                        <i class="bi bi-whatsapp me-2"></i> CONFIRM ORDER
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
    const app = (function() {
        // --- 1. CONFIGURATION ---
        const ORDER_LIMIT = 100000;
        
        // --- 2. CATEGORY RULES (Tagging System) ---
        // "CategoryName": ["Keyword1", "Keyword2"]
        const RULES = {
            "SHOCK ABSORBER": ["SHOCK ABSORBER"],
            "SUSPENSION": ["TIE ROD END", "SHOCK ABSORBER", "BALL JOINT", "CONTROL ROD", "CONTROL ARM", "ARM BUSH", "RACK END", "STABILIZER LINK", "ARM BUSH"],
            "STEERING": ["POWER STEERING PUMP", "POWER STEERING RACK", "STEERING"],
            "RADIATOR": ["RADIATOR", "CONDENSER", "FAN BLADE", "FAN CASE"],
            "ROCKMONT": ["MAN", "DAF", "SCANIA", "ROCKMONT"],
            "MOUNTING": ["ENGINE MOUNTING", "GEARBOX MOUNTING"],
            "CYLINDER": ["CLUTCH MASTER", "CLUTCH SLAVE", "BRAKE MASTER", "WHEEL CYLINDER"],
            "PLATE": ["PRESSURE PLATE", "CLUTCH PLATE"],
            "LIGHT": ["LAMP"],
            "FILTER": ["FILTER", "ELEMENT"],
            "TOP MOUNTING": ["TOP MOUNTING"],
            "SPRINTER": ["SPRINTER"],
            "BRAKE PAD": ["BRAKE PAD", "BRAKE SHOE"],
            "WATER PUMP": ["WATER PUMP"],
            "SPARK": ["SPARK PLUG", "IGNITION COIL"],
            "GASKET": ["HEAD GASKET", "FULL GASKET", "VALVE COVER GASKET"],
            "BUSH": ["BUSH"],
            "ELECTRIC": ["ALTERNATOR", "STARTER"],
            "BRAKE DISC": ["BRAKE DISC"]
        };

        // --- 3. USERS ---
        const USERS = [
            { id: "GH98904", p: "0000", n: "Client GH98904", allow: ["STEERING", "SUSPENSION"] },
            { id: "GH10328", p: "0000", n: "Yebford Radiator", allow: ["RADIATOR"] },
            { id: "GH98791", p: "0000", n: "K.auto", allow: ["RADIATOR"] },
            { id: "GH10147", p: "0000", n: "Qualiparts Ent", allow: ["RADIATOR"] },
            { id: "GH10307", p: "0000", n: "Yeboah Radiator", allow: ["RADIATOR"] },
            { id: "GH98873", p: "0000", n: "Pole to Pole", allow: ["RADIATOR"] },
            { id: "GH10051", p: "0000", n: "David Gyamfi", allow: ["RADIATOR"] },
            { id: "GH10811", p: "0000", n: "Client GH10811", allow: ["SUSPENSION", "TOP MOUNTING"] },
            { id: "GH10112", p: "0000", n: "Client GH10112", allow: ["SUSPENSION"] }
        ];

        // --- STATE ---
        let db = [];
        let userDb = [];
        let cart = [];
        let curItem = null;
        let curUser = null;
        let pModal, cModal;

        // --- INIT ---
        function init() {
            try {
                pModal = new bootstrap.Modal(document.getElementById('pModal'));
                cModal = new bootstrap.Modal(document.getElementById('cModal'));
                loadCSV();
            } catch(e) { console.error(e); }
        }

        // --- CSV PARSER (The Robust Engine) ---
        function loadCSV() {
            fetch('products.csv?v=' + Date.now())
                .then(r => { if(!r.ok) throw new Error("CSV Missing"); return r.text(); })
                .then(txt => {
                    db = parse(txt);
                    document.getElementById('loadingMsg').style.display = 'none';
                })
                .catch(err => {
                    document.getElementById('loadingMsg').innerText = "System Error: Cannot load products.csv";
                    console.error(err);
                });
        }

        function parse(csvText) {
            // Normalize line breaks
            const lines = csvText.replace(/\r\n/g, '\n').replace(/\r/g, '\n').split('\n');
            const result = [];
            
            for (let i = 1; i < lines.length; i++) {
                const line = lines[i].trim();
                if (!line) continue;

                // Simple regex to handle commas inside quotes: "Shock, Front",100
                const matches = line.match(/(".*?"|[^",\s]+)(?=\s*,|\s*$)/g);
                if (!matches || matches.length < 2) continue; // Skip bad lines

                const clean = (s) => s ? s.replace(/^"|"$/g, '').trim() : "";
                
                const name = clean(matches[1]);
                const cats = assignCats(name);

                result.push({
                    code: clean(matches[0]),
                    name: name,
                    stock: parseInt(matches[2]) || 0,
                    price: parseFloat(matches[3]) || 0,
                    promo: matches[4] ? parseFloat(matches[4]) : 0,
                    new: (matches[5] && clean(matches[5]) === '1') ? 1 : 0,
                    cats: cats
                });
            }
            return result;
        }

        function assignCats(name) {
            let tags = [];
            let n = name.toUpperCase();
            for (let [cat, keys] of Object.entries(RULES)) {
                if (keys.some(k => n.includes(k))) tags.push(cat);
            }
            return tags;
        }

        // --- LOGIC ---
        function login() {
            let id = document.getElementById('loginId').value.toUpperCase().trim();
            let pw = document.getElementById('loginPass').value.trim();
            let u = USERS.find(x => x.id === id && x.p === pw);

            if (u) {
                curUser = u;
                // Filter DB based on access
                userDb = db.filter(p => p.cats.some(c => u.allow.includes(c)));
                
                document.getElementById('uName').innerText = u.n;
                document.getElementById('loginSection').style.display = 'none';
                document.getElementById('mainApp').style.display = 'block';
                search();
            } else {
                document.getElementById('loginMsg').innerText = "Invalid ID or Password";
            }
        }

        function search() {
            let term = document.getElementById('searchInput').value.toUpperCase().trim();
            let list = document.getElementById('resultsList');
            let data = userDb;

            if (data.length === 0) {
                list.innerHTML = `<div class="text-center text-muted mt-5">No products authorized for this account.</div>`;
                return;
            }

            if (term) {
                if (term === 'NEW') data = data.filter(i => i.new === 1);
                else if (term === 'STOCK') data = data.filter(i => i.stock > 0);
                else {
                    let tokens = term.split(/\s+/);
                    data = data.filter(i => {
                        let str = (i.code + " " + i.name).toUpperCase();
                        return tokens.every(t => str.includes(t));
                    });
                }
            }

            if (data.length === 0) {
                list.innerHTML = `<div class="text-center text-muted mt-5">No matches found.</div>`;
                return;
            }

            // Render first 50
            let html = "";
            data.slice(0, 50).forEach((item, idx) => {
                // IMPORTANT: We need a unique ID. Using code is safer than index.
                let stockHtml = item.stock <= 0 ? `<span class="stock-tag bg-stock-zero">OUT</span>` : 
                               (item.stock <= 10 ? `<span class="stock-tag bg-stock-low">LOW</span>` : `<span class="stock-tag bg-stock-high">IN STOCK</span>`);
                
                let priceHtml = `<span class="p-norm">${item.price}</span>`;
                if(item.promo > 0 && item.promo < item.price) {
                    priceHtml = `<div><span class="p-orig">${item.price}</span><span class="p-promo text-danger">${item.promo}</span></div>`;
                }

                html += `
                <div class="result-item" onclick="app.openDetail('${item.code}')">
                    <div class="d-flex justify-content-between mb-1">
                        <div class="part-code">${item.code} ${item.new?'<span class="badge bg-primary ms-1" style="font-size:0.5rem">NEW</span>':''}</div>
                        ${stockHtml}
                    </div>
                    <div class="part-name">${item.name}</div>
                    <div class="text-end mt-1">${priceHtml}</div>
                </div>`;
            });
            list.innerHTML = html;
        }

        function openDetail(code) {
            curItem = userDb.find(i => i.code === code);
            if (!curItem) return;

            document.getElementById('mCode').innerText = curItem.code;
            document.getElementById('mName').innerText = curItem.name;
            let img = document.getElementById('mImg');
            img.src = `images/${curItem.code}.jpg`;
            img.style.display = 'block';
            
            // Logic
            let hasPromo = (curItem.promo > 0 && curItem.promo < curItem.price);
            let pBox = document.getElementById('mPriceBox');
            if (hasPromo) {
                pBox.innerHTML = `<span class="p-orig">${curItem.price}</span><span class="p-promo">${curItem.promo}</span>`;
                document.getElementById('mPromoMsg').style.display = 'block';
            } else {
                pBox.innerHTML = `<span class="p-norm">${curItem.price}</span>`;
                document.getElementById('mPromoMsg').style.display = 'none';
            }

            let sBox = document.getElementById('mStockBox');
            let actBox = document.getElementById('mActionBox');
            let outBox = document.getElementById('mOutStock');

            if (curItem.stock > 0) {
                sBox.innerHTML = curItem.stock <= 10 ? `<span class="stock-tag bg-stock-low">LOW STOCK</span>` : `<span class="stock-tag bg-stock-high">IN STOCK</span>`;
                actBox.style.display = 'flex';
                outBox.style.display = 'none';
            } else {
                sBox.innerHTML = `<span class="stock-tag bg-stock-zero">OUT OF STOCK</span>`;
                actBox.style.display = 'none';
                outBox.style.display = 'block';
            }
            
            document.getElementById('mQty').value = 1;
            pModal.show();
        }

        function adjQty(d) {
            let q = parseInt(document.getElementById('mQty').value) + d;
            if (q < 1) q = 1;
            if (curItem && q > curItem.stock) { alert("Max stock reached"); q = curItem.stock; }
            document.getElementById('mQty').value = q;
        }

        function addToCart() {
            if (!curItem) return;
            let qty = parseInt(document.getElementById('mQty').value);
            let exist = cart.find(x => x.code === curItem.code);
            
            if (exist) {
                if (exist.qty + qty > curItem.stock) return alert("Total quantity exceeds stock");
                exist.qty += qty;
            } else {
                cart.push({ ...curItem, qty: qty });
            }
            pModal.hide();
            updateCartUI();
        }

        function updateCartUI() {
            let totalQty = cart.reduce((a, b) => a + b.qty, 0);
            let badge = document.getElementById('cartBadge');
            badge.innerText = totalQty;
            badge.style.display = totalQty > 0 ? 'flex' : 'none';
        }

        function openCart() {
            let body = document.getElementById('cBody');
            let totalVal = 0;
            
            if (cart.length === 0) {
                body.innerHTML = `<div class="text-center py-5 text-muted">Cart is empty</div>`;
            } else {
                let html = "";
                cart.forEach((item, idx) => {
                    let p = item.price;
                    let isP = false;
                    if (item.promo > 0 && item.qty >= 5) { p = item.promo; isP = true; }
                    
                    totalVal += p * item.qty;
                    
                    html += `
                    <div class="d-flex justify-content-between align-items-center border-bottom py-2">
                        <div style="width:60%">
                            <div class="fw-bold small text-dark">${item.code}</div>
                            <div class="text-muted" style="font-size:0.7rem; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">${item.name}</div>
                            <div class="fw-bold ${isP?'text-danger':''}">${p} x ${item.qty}</div>
                            ${item.promo>0 && !isP ? `<small class="text-warning" style="font-size:0.6rem">Add ${5-item.qty} for Promo</small>` : ''}
                        </div>
                        <button onclick="app.delCart(${idx})" class="btn btn-sm text-danger fw-bold">REMOVE</button>
                    </div>`;
                });
                body.innerHTML = html;
            }
            
            document.getElementById('cTotal').innerText = totalVal;
            document.getElementById('limitAlert').style.display = totalVal > ORDER_LIMIT ? 'block' : 'none';
            cModal.show();
        }

        function delCart(i) {
            cart.splice(i, 1);
            updateCartUI();
            openCart(); // refresh
        }

        function sendOrder() {
            if (cart.length === 0) return;
            let t = 0;
            let lines = [];
            cart.forEach(i => {
                let p = (i.promo > 0 && i.qty >= 5) ? i.promo : i.price;
                t += p * i.qty;
                lines.push(`â–ª ${i.code} (x${i.qty}) @ ${p}`);
            });
            
            if(t > ORDER_LIMIT) return alert("Order limit exceeded!");

            let msg = `ðŸ›’ *ORDER - ${curUser.n}*\n\n` + lines.join('\n') + `\n\n*TOTAL: ${t}*`;
            window.open(`https://wa.me/?text=${encodeURIComponent(msg)}`, '_blank');
            
            // clear
            cart = [];
            updateCartUI();
            cModal.hide();
            // Local stock deduction simulation could happen here, but since CSV reloads on refresh, it's temporary.
        }

        function viewImage(src) {
            document.getElementById('fullImage').src = src;
            document.getElementById('imageOverlay').style.display = 'flex';
        }

        // Public API
        return {
            init, login, search, openDetail, adjQty, addToCart, openCart, delCart, sendOrder, viewImage
        };

    })();

    // Boot
    document.addEventListener('DOMContentLoaded', app.init);
    document.getElementById('loginPass').addEventListener('keypress', (e)=>{ if(e.key==='Enter') app.login(); });
    </script>
</body>
</html>